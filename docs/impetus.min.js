!function(e,t){if("function"==typeof define&&define.amd)define(["exports","module"],t);else if("undefined"!=typeof exports&&"undefined"!=typeof module)t(exports,module);else{var n={exports:{}};t(n.exports,n),e.Impetus=n.exports}}(this,function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t)}catch(e){}return i=function(){return e},e}var o=.04,r=.11,u=function e(t){function u(){A.call(T,K,N)}function c(e){if("touchmove"===e.type||"touchstart"===e.type||"touchend"===e.type){var t=e.targetTouches[0]||e.changedTouches[0];return{x:t.clientX,y:t.clientY,id:t.identifier}}return{x:e.clientX,y:e.clientY,id:null}}function d(e){var t=c(e);$||_||($=!0,ee=!1,G=t.id,k=O=v("x")?t.x:k,z=W=v("y")?t.y:z,te=[],l(k,z),M.addEventListener("touchmove",f,!!i()&&{passive:!1}),M.addEventListener("touchend",a),M.addEventListener("touchcancel",h),M.addEventListener("mousemove",f,!!i()&&{passive:!1}),M.addEventListener("mouseup",a))}function f(e){e.preventDefault();var t=c(e);$&&t.id===G&&(O=v("x")?t.x:O,W=v("y")?t.y:W,l(k,z),p())}function a(e){var t=c(e);$&&t.id===G&&h()}function v(e){return g===e||!0===g}function h(){$=!1,l(k,z),w(),M.removeEventListener("touchmove",f),M.removeEventListener("touchend",a),M.removeEventListener("touchcancel",h),M.removeEventListener("mouseup",a),M.removeEventListener("mousemove",f)}function l(e,t){for(var n=Date.now();te.length>0&&!(n-te[0].time<=100);)te.shift();te.push({x:e,y:t,time:n})}function m(){var e=O-k||0,t=W-z||0;if(K+=e*Y,N+=t*Y,C){var n=x();0!==n.x&&(K-=e*y(n.x)*Y),0!==n.y&&(N-=t*y(n.y)*Y)}else x(!0);u(),k=O,z=W,Z=!1}function y(e){return 5e-6*Math.pow(e,2)+1e-4*e+.55}function p(){Z||s(m),Z=!0}function x(e){var t=0,n=0;return v("x")&&(void 0!==D&&K<D?t=D-K:void 0!==R&&K>R&&(t=R-K)),v("y")&&(void 0!==U&&N<U?n=U-N:void 0!==j&&N>j&&(n=j-N)),e&&(0!==t&&(K=t>0?D:R),0!==n&&(N=n>0?U:j)),{x:t,y:n,inBounds:0===t&&0===n}}function w(){var e=te[0],t=te[te.length-1],n=t.x-e.x,i=t.y-e.y,o=t.time-e.time,r=o/15/Y;H=n/r||0,J=i/r||0;var u=x();(Math.abs(H)>1||Math.abs(J)>1||!u.inBounds)&&(ee=!0,s(E))}function E(){if(ee){H*=F,J*=F,K+=H,N+=J;var e=x();if(Math.abs(H)>Q||Math.abs(J)>Q||!e.inBounds){if(C){if(0!==e.x)if(e.x*H<=0)H+=e.x*o;else{var t=e.x>0?2.5:-2.5;H=(e.x+t)*r}if(0!==e.y)if(e.y*J<=0)J+=e.y*o;else{var t=e.y>0?2.5:-2.5;J=(e.y+t)*r}}else 0!==e.x&&(K=e.x>0?D:R,H=0),0!==e.y&&(N=e.y>0?U:j,J=0);u(),s(E)}else ee=!1}}var L=t.axis,g=void 0===L||L,b=t.window,M=void 0===b?window:b,B=t.source,T=void 0===B?window:B,A=t.update,X=t.multiplier,Y=void 0===X?1:X,q=t.friction,F=void 0===q?.92:q,I=t.initialValues,P=t.boundX,S=t.boundY,V=t.bounce,C=void 0===V||V;n(this,e);var D,R,U,j,k,z,O,W,G,H,J,K=0,N=0,Q=.3*Y,Z=!1,$=!1,_=!1,ee=!1,te=[];M.addEventListener("touchmove",function(){}),function(){if(!(T="string"==typeof T?M.document.querySelector(T):T))throw new Error("IMPETUS: source not found.");if(!A)throw new Error("IMPETUS: update function not defined.");I&&(I[0]&&(K=I[0]),I[1]&&(N=I[1]),u()),P&&(D=P[0],R=P[1]),S&&(U=S[0],j=S[1]),T.addEventListener("touchstart",d),T.addEventListener("mousedown",d)}(),this.destroy=function(){return T.removeEventListener("touchstart",d),T.removeEventListener("mousedown",d),null},this.pause=function(){$=!1,_=!0},this.resume=function(){_=!1},this.setValues=function(e,t){"number"==typeof e&&(K=e),"number"==typeof t&&(N=t)},this.getValues=function(){return[K,N]},this.setMultiplier=function(e){Y=e,Q=.3*Y},this.getMultiplier=function(){return Y},this.setBoundX=function(e){D=e[0],R=e[1]},this.getBoundX=function(){return[D,R]},this.setBoundY=function(e){U=e[0],j=e[1]},this.getBoundY=function(){return[U,j]},this.setAxis=function(e){e="string"==typeof e?e.toLowerCase():e,g="x"===e?"x":"y"===e?"y":!!e},this.getAxis=function(){return g||!1},this.getWindow=function(){return M}};t.exports=u;var s=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}()});