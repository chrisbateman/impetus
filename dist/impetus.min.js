!function(e,t){if("function"==typeof define&&define.amd)define(["exports","module"],t);else if("undefined"!=typeof exports&&"undefined"!=typeof module)t(exports,module);else{var n={exports:{}};t(n.exports,n),e.Impetus=n.exports}}(this,function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=.3,i=.04,u=.11,r=function e(t){function r(){b.call(L,G,H)}function c(e){if("touchmove"===e.type||"touchstart"===e.type||"touchend"===e.type){var t=e.targetTouches[0]||e.changedTouches[0];return{x:t.clientX,y:t.clientY,id:t.identifier}}return{x:e.clientX,y:e.clientY,id:null}}function d(e){var t=c(e);N||O||(N=!0,Q=!1,z=t.id,R=V=t.x,U=k=t.y,W=[],m(R,U),document.addEventListener("touchmove",a),document.addEventListener("touchend",f),document.addEventListener("touchcancel",v),document.addEventListener("mousemove",a),document.addEventListener("mouseup",f))}function a(e){e.preventDefault();var t=c(e);N&&t.id===z&&(V=t.x,k=t.y,m(R,U),p())}function f(e){var t=c(e);N&&t.id===z&&v()}function v(){N=!1,m(R,U),x(),document.removeEventListener("touchmove",a),document.removeEventListener("touchend",f),document.removeEventListener("touchcancel",v),document.removeEventListener("mouseup",f),document.removeEventListener("mousemove",a)}function m(e,t){for(var n=Date.now();W.length>0&&!(n-W[0].time<=100);)W.shift();W.push({x:e,y:t,time:n})}function l(){var e=V-R,t=k-U;if(G+=e*T,H+=t*T,F){var n=y();0!==n.x&&(G-=e*h(n.x)*T),0!==n.y&&(H-=t*h(n.y)*T)}else y(!0);r(),R=V,U=k,K=!1}function h(e){return 5e-6*Math.pow(e,2)+1e-4*e+.55}function p(){K||s(l),K=!0}function y(e){var t=0,n=0;return void 0!==I&&G<I?t=I-G:void 0!==S&&G>S&&(t=S-G),void 0!==D&&H<D?n=D-H:void 0!==P&&H>P&&(n=P-H),e&&(0!==t&&(G=t>0?I:S),0!==n&&(H=n>0?D:P)),{x:t,y:n,inBounds:0===t&&0===n}}function x(){var e=W[0],t=W[W.length-1],n=t.x-e.x,o=t.y-e.y,i=t.time-e.time,u=i/15/T;C=n/u||0,j=o/u||0;var r=y();(Math.abs(C)>1||Math.abs(j)>1||!r.inBounds)&&(Q=!0,s(w))}function w(){if(Q){C*=B,j*=B,G+=C,H+=j;var e=y();if(Math.abs(C)>J||Math.abs(j)>J||!e.inBounds){if(F){var t=2.5;if(0!==e.x)if(e.x*C<=0)C+=e.x*i;else{var n=e.x>0?t:-t;C=(e.x+n)*u}if(0!==e.y)if(e.y*j<=0)j+=e.y*i;else{var n=e.y>0?t:-t;j=(e.y+n)*u}}else 0!==e.x&&(G=e.x>0?I:S,C=0),0!==e.y&&(H=e.y>0?D:P,j=0);r(),s(w)}else Q=!1}}var E=t.source,L=void 0===E?document:E,b=t.update,M=t.multiplier,T=void 0===M?1:M,g=t.friction,B=void 0===g?.92:g,q=t.initialValues,X=t.boundX,Y=t.boundY,A=t.bounce,F=void 0===A||A;n(this,e);var I,S,D,P,R,U,V,k,z,C,j,G=0,H=0,J=o*T,K=!1,N=!1,O=!1,Q=!1,W=[];!function(){if(L="string"==typeof L?document.querySelector(L):L,!L)throw new Error("IMPETUS: source not found.");if(!b)throw new Error("IMPETUS: update function not defined.");q&&(q[0]&&(G=q[0]),q[1]&&(H=q[1]),r()),X&&(I=X[0],S=X[1]),Y&&(D=Y[0],P=Y[1]),L.addEventListener("touchstart",d),L.addEventListener("mousedown",d)}(),this.pause=function(){N=!1,O=!0},this.resume=function(){O=!1},this.setValues=function(e,t){"number"==typeof e&&(G=e),"number"==typeof t&&(H=t)},this.setMultiplier=function(e){T=e,J=o*T},this.setBoundX=function(e){I=e[0],S=e[1]},this.setBoundY=function(e){D=e[0],P=e[1]}};t.exports=r;var s=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}()});