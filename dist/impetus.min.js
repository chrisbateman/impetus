!function(e,n){if("function"==typeof define&&define.amd)define(["exports","module"],n);else if("undefined"!=typeof exports&&"undefined"!=typeof module)n(exports,module);else{var t={exports:{}};n(t.exports,t),e.Impetus=t.exports}}(this,function(e,n){"use strict";function t(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function o(){var e=!1;try{var n=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,n)}catch(e){}return o=function(){return e},e}var i=.04,u=.11;window.addEventListener("touchmove",function(){});var r=function e(n){function r(){B.call(M,Q,W)}function s(){T&&T.call(M,Q,W)}function d(){S&&S.call(M,Q,W)}function a(){q&&q.call(M,Q,W)}function f(e){if("touchmove"===e.type||"touchstart"===e.type||"touchend"===e.type){var n=e.targetTouches[0]||e.changedTouches[0];return{x:n.clientX,y:n.clientY,id:n.identifier}}return{x:e.clientX,y:e.clientY,id:null}}function v(e){var n=f(e);_||ee||(s(),_=!0,ne=!1,J=n.id,C=G=n.x,O=H=n.y,te=[],p(C,O),document.addEventListener("touchmove",m,!!o()&&{passive:!1}),document.addEventListener("touchend",l),document.addEventListener("touchcancel",h),document.addEventListener("mousemove",m,!!o()&&{passive:!1}),document.addEventListener("mouseup",l))}function m(e){e.preventDefault();var n=f(e);_&&n.id===J&&(G=n.x,H=n.y,p(C,O),w())}function l(e){var n=f(e);_&&n.id===J&&h()}function h(){_=!1,p(C,O),L(),document.removeEventListener("touchmove",m),document.removeEventListener("touchend",l),document.removeEventListener("touchcancel",h),document.removeEventListener("mouseup",l),document.removeEventListener("mousemove",m)}function p(e,n){for(var t=Date.now();te.length>0&&!(t-te[0].time<=100);)te.shift();te.push({x:e,y:n,time:t})}function y(){var e=G-C,n=H-O;if(Q+=e*X,W+=n*X,R){var t=E();0!==t.x&&(Q-=e*x(t.x)*X),0!==t.y&&(W-=n*x(t.y)*X)}else E(!0);r(),C=G,O=H,$=!1}function x(e){return 5e-6*Math.pow(e,2)+1e-4*e+.55}function w(){$||c(y),$=!0}function E(e){var n=0,t=0;return void 0!==V&&Q<V?n=V-Q:void 0!==j&&Q>j&&(n=j-Q),void 0!==k&&W<k?t=k-W:void 0!==z&&W>z&&(t=z-W),e&&(0!==n&&(Q=n>0?V:j),0!==t&&(W=t>0?k:z)),{x:n,y:t,inBounds:0===n&&0===t}}function L(){var e=te[0],n=te[te.length-1],t=n.x-e.x,o=n.y-e.y,i=n.time-e.time,u=i/15/X;K=t/u||0,N=o/u||0;var r=E();d(),Math.abs(K)>1||Math.abs(N)>1||!r.inBounds?(ne=!0,c(b)):a()}function b(){if(ne){K*=A,N*=A,Q+=K,W+=N;var e=E();if(Math.abs(K)>Z||Math.abs(N)>Z||!e.inBounds){if(R){if(0!==e.x)if(e.x*K<=0)K+=e.x*i;else{var n=e.x>0?2.5:-2.5;K=(e.x+n)*u}if(0!==e.y)if(e.y*N<=0)N+=e.y*i;else{var n=e.y>0?2.5:-2.5;N=(e.y+n)*u}}else 0!==e.x&&(Q=e.x>0?V:j,K=0),0!==e.y&&(W=e.y>0?k:z,N=0);r(),c(b)}else ne=!1,a()}}var g=n.source,M=void 0===g?document:g,T=n.onStart,B=n.onUpdate,S=n.onStartDecelerating,q=n.onEndDecelerating,D=n.multiplier,X=void 0===D?1:D,Y=n.friction,A=void 0===Y?.92:Y,F=n.initialValues,I=n.boundX,P=n.boundY,U=n.bounce,R=void 0===U||U;t(this,e);var V,j,k,z,C,O,G,H,J,K,N,Q=0,W=0,Z=.3*X,$=!1,_=!1,ee=!1,ne=!1,te=[];!function(){if(!(M="string"==typeof M?document.querySelector(M):M))throw new Error("IMPETUS: source not found.");if(!B)throw new Error("IMPETUS: update function not defined.");F&&(F[0]&&(Q=F[0]),F[1]&&(W=F[1]),r()),I&&(V=I[0],j=I[1]),P&&(k=P[0],z=P[1]),M.addEventListener("touchstart",v),M.addEventListener("mousedown",v)}(),this.destroy=function(){return M.removeEventListener("touchstart",v),M.removeEventListener("mousedown",v),null},this.pause=function(){_=!1,ee=!0},this.resume=function(){ee=!1},this.setValues=function(e,n){"number"==typeof e&&(Q=e),"number"==typeof n&&(W=n)},this.setMultiplier=function(e){X=e,Z=.3*X},this.setBoundX=function(e){V=e[0],j=e[1]},this.setBoundY=function(e){k=e[0],z=e[1]}};n.exports=r;var c=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}()});