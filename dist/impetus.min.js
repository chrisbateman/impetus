!function(e,t){if("function"==typeof define&&define.amd)define(["exports","module"],t);else if("undefined"!=typeof exports&&"undefined"!=typeof module)t(exports,module);else{var n={exports:{}};t(n.exports,n),e.Impetus=n.exports}}(this,function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t)}catch(e){}return o=function(){return e},e}var i=.04,u=.11;window.addEventListener("touchmove",function(){});var r=function e(t){function r(){g.call(L,H,J)}function c(e){if("touchmove"===e.type||"touchstart"===e.type||"touchend"===e.type){var t=e.targetTouches[0]||e.changedTouches[0];return{x:t.clientX,y:t.clientY,id:t.identifier}}return{x:e.clientX,y:e.clientY,id:null}}function d(e){var t=c(e);Q||W||(Q=!0,Z=!1,z=t.id,U=j="y"!==M?t.x:U,V=k="x"!==M?t.y:V,$=[],m(U,V),document.addEventListener("touchmove",a,!!o()&&{passive:!1}),document.addEventListener("touchend",f),document.addEventListener("touchcancel",v),document.addEventListener("mousemove",a,!!o()&&{passive:!1}),document.addEventListener("mouseup",f))}function a(e){e.preventDefault();var t=c(e);Q&&t.id===z&&(j="y"!==M?t.x:j,k="x"!==M?t.y:k,m(U,V),y())}function f(e){var t=c(e);Q&&t.id===z&&v()}function v(){Q=!1,m(U,V),x(),document.removeEventListener("touchmove",a),document.removeEventListener("touchend",f),document.removeEventListener("touchcancel",v),document.removeEventListener("mouseup",f),document.removeEventListener("mousemove",a)}function m(e,t){for(var n=Date.now();$.length>0&&!(n-$[0].time<=100);)$.shift();$.push({x:e,y:t,time:n})}function h(){var e=j-U||0,t=k-V||0;if(H+=e*B,J+=t*B,P){var n=p();0!==n.x&&(H-=e*l(n.x)*B),0!==n.y&&(J-=t*l(n.y)*B)}else p(!0);r(),U=j,V=k,N=!1}function l(e){return 5e-6*Math.pow(e,2)+1e-4*e+.55}function y(){N||s(h),N=!0}function p(e){var t=0,n=0;return"y"!==M&&(void 0!==S&&H<S?t=S-H:void 0!==C&&H>C&&(t=C-H)),"x"!==M&&(void 0!==D&&J<D?n=D-J:void 0!==R&&J>R&&(n=R-J)),e&&(0!==t&&(H=t>0?S:C),0!==n&&(J=n>0?D:R)),{x:t,y:n,inBounds:0===t&&0===n}}function x(){var e=$[0],t=$[$.length-1],n=t.x-e.x,o=t.y-e.y,i=t.time-e.time,u=i/15/B;O=n/u||0,G=o/u||0;var r=p();(Math.abs(O)>1||Math.abs(G)>1||!r.inBounds)&&(Z=!0,s(w))}function w(){if(Z){O*=A,G*=A,H+=O,J+=G;var e=p();if(Math.abs(O)>K||Math.abs(G)>K||!e.inBounds){if(P){if(0!==e.x)if(e.x*O<=0)O+=e.x*i;else{var t=e.x>0?2.5:-2.5;O=(e.x+t)*u}if(0!==e.y)if(e.y*G<=0)G+=e.y*i;else{var t=e.y>0?2.5:-2.5;G=(e.y+t)*u}}else 0!==e.x&&(H=e.x>0?S:C,O=0),0!==e.y&&(J=e.y>0?D:R,G=0);r(),s(w)}else Z=!1}}var E=t.source,L=void 0===E?document:E,b=t.axis,M=void 0!==b&&b,g=t.update,T=t.multiplier,B=void 0===T?1:T,q=t.friction,A=void 0===q?.92:q,X=t.initialValues,Y=t.boundX,F=t.boundY,I=t.bounce,P=void 0===I||I;n(this,e);var S,C,D,R,U,V,j,k,z,O,G,H=0,J=0,K=.3*B,N=!1,Q=!1,W=!1,Z=!1,$=[];!function(){if(!(L="string"==typeof L?document.querySelector(L):L))throw new Error("IMPETUS: source not found.");if(!g)throw new Error("IMPETUS: update function not defined.");X&&(X[0]&&(H=X[0]),X[1]&&(J=X[1]),r()),Y&&(S=Y[0],C=Y[1]),F&&(D=F[0],R=F[1]),L.addEventListener("touchstart",d),L.addEventListener("mousedown",d)}(),this.destroy=function(){return L.removeEventListener("touchstart",d),L.removeEventListener("mousedown",d),null},this.pause=function(){Q=!1,W=!0},this.resume=function(){W=!1},this.setValues=function(e,t){"number"==typeof e&&(H=e),"number"==typeof t&&(J=t)},this.setMultiplier=function(e){B=e,K=.3*B},this.setBoundX=function(e){S=e[0],C=e[1]},this.setBoundY=function(e){D=e[0],R=e[1]},this.setAxis=function(e){var t=(e||"").toLowerCase();M="x"===t?"x":"y"===t&&"y"}};t.exports=r;var s=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}()});